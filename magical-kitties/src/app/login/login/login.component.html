<div
    class="flex flex-col"
    [formGroup]="formGroup"
>
    <mat-form-field class="mb-5">
        <mat-label>Email or Username</mat-label>
        <input
            matInput
            formControlName="email"
        />
        @if (formGroup.controls["email"].hasError('required')){
        <mat-error>Email is required</mat-error>
        }
    </mat-form-field>
    <mat-form-field class="mb-5">
        <mat-label>Password</mat-label>
        <input
            matInput
            formControlName="password"
            [type]="hidePassword ? 'password' : 'text'"
        />
        <mat-icon
            matSuffix
            (click)="hidePassword = !hidePassword"
            >{{ hidePassword ? "visibility_off" : "visibility" }}</mat-icon
        >
        <mat-hint
            ><a
                routerLink="/forgot-password"
                routerLinkActive="router-link-active"
                >Forgot password?
            </a>
        </mat-hint>
    </mat-form-field>
    <span
        *ngIf="loginError"
        class="error mb-5"
        >Email, username, or password is incorrect. Please check and try again or click 'Forgot password' to reset your password.</span
    >
    <button
        mat-raised-button
        disabled="{{ formGroup.invalid || formSubmitting }}"
        (click)="login()"
    >
        @if(formSubmitting){
        <mat-spinner [diameter]="20"></mat-spinner>
        } @else{ Login }
    </button>
    <span class="mt-5"
        >Need an account?
        <a
            routerLink="/register"
            routerLinkActive="router-link-active"
            >Register here.</a
        >
    </span>
</div>
